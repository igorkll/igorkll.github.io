<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>SComputers - Api Reference</title>
        <link rel="icon" href="favicon.ico">
        <link rel="stylesheet" href="style.css">
        <link href="highlight.css" rel="stylesheet">
        <script src="highlight.js"></script>
        <script>
			hljs.highlightAll();
		</script>
    </head>
    <body>
        <a class="text" href="index.html">main page</a>
        <br/>
        <a class="text" href="addons.html#minimap_component">main page - addon list</a>

        <br/>
        <br/>
        <a target="_blank" href="https://steamcommunity.com/sharedfiles/filedetails/?id=3360952754">
            <img src="addons/minimap_component.jpg" class="image" />
        </a>

        <br/>
        <p class="text">
            this is an addon for the minimap in SComputers!<br/>
            in fact, this is a camera with an additional API.<br/>
            It also supports waypoints.<br/>
            survival crafting is also supported.<br/>
            supports isometric rendering
        </p>

        <br/>
        <p class="text">
            it completely inherits the <a class="text" href="camera.html">camera</a> API<br/>
            the camera is fixed somewhere on top, you can control it using an additional API<br/>
            also, this unit can be connected using CameraTunnel<br/>
            component name - camera
        </p>

        <p class="text">additional API:</p>
        <ul class="list">
            <li><span>camera.setMinimapHeight(height:number) - sets the height of the camera in meters</span></li>
            <li><span>camera.getMinimapHeight():number</span></li>
            <li><span>camera.setMinimapRotation(rotation:number) - sets the rotation of the minimap in radians</span></li>
            <li><span>camera.getMinimapRotation():number</span></li>
            <li><span>camera.setIsometricRender(enable:boolean) - enables or disables isometric rendering. when the isometric render is enabled, instead of fov and height, you need to change isometric size using setIsometricSize. and it is better to set the height to 1000 (in order to see high-rise creations) fov does not affect anything in this mode</span></li>
            <li><span>camera.isIsometricRender():boolean</span></li>
            <li><span>camera.setIsometricSize(isometricSize:float, isometricSize:float) - changes the size of the area captured by the isometric renderer</span></li>
            <li><span>camera.getIsometricSize():float, float</span></li>
            <li><span>camera.setMinimapOffset(number, number) - sets the offset of the minimap relative to the minimap block</span></li>
            <li><span>camera.getMinimapOffset():number, number</span></li>
        </ul>

        <pre>
            <code class="language-lua" style="width: fit-content;">local fastmode = false
                    
local display = getComponent("display")
display.reset()
display.clear()
display.setSkipAtNotSight(true) --in order for the picture not to be updated for those who do not look at the screen

local camera = getComponent("camera")
local fov = math.rad(60)
camera.setNonSquareFov(fov * (display.getWidth() / display.getHeight()), fov)
camera.setStep(512)
camera.setMinimapHeight(1000)
camera.setIsometricRender(true)
camera.setDistance(2048)

local isometricSize = 64
camera.setIsometricSize(isometricSize * (display.getWidth() / display.getHeight()), isometricSize)

local renderSettings = {
    lampLighting = false,
    shadows = false,
    smoothingTerrain = false,
    simpleShadows = false,
    sun = false, --is the solar disk being rendered
    fog = false,
    reduceAccuracy = false, --allows you to use fewer display effects in fog and simpleShadows, which increases performance in some cases

    constDayLightValue = nil, --you can make a constant time of day
    shadowMultiplier = 0.6,
    sunPercentage = 0.003, --this value is the percentage of the sun from the size of the sky
    simpleShadowMin = 0.3, --the minimum brightness of an object that a simple shadow can give
    simpleShadowMax = 1, --the maximum brightness of an object that a simple shadow can give

    customWaterColor = nil,
    customChemicalColor = nil,
    customOilColor = nil,

    constSkyColor = nil, --by default, it depends on the time of day
    customSunColor = nil, --you can change the color of the sun
    constShapeColor = nil,
    customLiftColor = nil,
    constTerrainColor = nil, --you can make the whole terrain one color, even blue
    constCharacterColor = nil,
    constJointColor = nil,
    constHarvestableColor = nil, --allows all Harvestables to be the same color, instead of their real color
    constAssetsColor = nil, --you can set the constant color of assets so that it is always 1 and is not determined by the material

    customTerrainColor_dirt = nil,
    customTerrainColor_grass = nil,
    customTerrainColor_sand = nil,
    customTerrainColor_stone = nil,
}

function callback_loop()
    if _endtick then
        display.clear()
        display.forceFlush()
        return
    end

    if display.getAudience() > 0 then --if no one is looking at the screen at all, then the camera will not work
        camera.drawAdvanced(display, renderSettings)
        display.flush()
    end
end</code>
        </pre>
    </body>
</html>